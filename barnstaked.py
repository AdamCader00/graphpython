from gql import gql, Client
from gql.transport.requests import RequestsHTTPTransport

sample_transport=RequestsHTTPTransport(
    url='https://api.thegraph.com/subgraphs/name/adamcader00/barn-bridge',
    verify=True,
    retries=3,
)
client = Client(
    transport=sample_transport
)



address = "0xee338a4307544f7ac4e8569311dccb7fcc59a00d"

addresses =[
"0x4655b7ad0b5f5bacb9cf960bbffceb3f0e51f363","0xf7f8e8461dd7d27a2b1c439372d171e38e6d71ae","0x6f812f43ce8c2d3dfa44726c2fdc40a39470f941","0x747dfb7d6d27671b4e3e98087f00e6b023d0aab7","0x4c5510d9e13089cbd198e44ac0877fb3bd30a8ac","0x5921c191fe58175b1fb8943ed3f17345e615ff02","0x0f4ee9631f4be0a63756515141281a3e2b293bbe","0x5a27dbbff05f36dc927137855e3381f0c20c1cdd","0x9dcf0787196cf21e2a72493203d3430342894ef9","0x0ec63671bd81a3be3624796cb98f4df66e575d01","0x966f64dcfae608cc4f94dac3803d3d683c6cf4b6","0x4690f9f73463772d79a3a5aca5c24d7015cdcc09","0xca3650b0a1158c7736253c74d67a536d805d2f3e","0x988abfbb8743cc440e7ff7da6d2f4c60e301501f","0xb1d951cbf0b6f5be6f0d2c6b614a4035b79cf6b2","0xd628f7c481c7dd87f674870bec5d7a311fb1d9a2","0x0cfc56cdc0b0e644c7bb738cce330a3fdaee9213","0x4b9b09734b59f800a14da804a657fb67b29972a4","0x221e9cef2f16115f907515b10b7f2d4255c75a22","0x143d135cf09794bb60b6f6c30fa5941b481da1c1","0x6d2fd9e58973a9f64b3d3fd79949cad14af239e0","0x454ee4cc36612ffdc54d52d1b181ea73281c45d2","0xcbef4b43ab3843e42c1fcbb6000f6165ff0e4477","0x9381b0764e0020279078bfd4dec060977645efb8","0x96510ad3e75e21e1078b14c7ff8e4a60be0ac781","0x17ff46a45d10d8b2ef5b14c73f859d116e10db4f","0x4f96f50edb37a19216d87693e5db241e31bd3735","0x6635a41930904af67b1d89a39cde7abe3aadfa81","0xf9d89dc506c55738379c44dc27205fd6f68e1974","0xebdcbbe53dd4ab8f449b196e41b54bde6e7b27dd","0xd7ddf70125342f44e65ccbafae5135f2bb6526bb","0xa4bd7a75a5210de3f7494327b75bcd57a6c45514","0xda39076f0b633ab68a6edb911120fdb629bd4841","0x7cfed4d5d87ce27472dcb53300f510bfe53a6a29","0xaea896593fc844e7d44c4714883bf80d3d54c2cc","0xb3230f99138e2a0c274bd8b9dde894dd4f8bdfda","0x040509d1168258496171ba8817500c46d6cdafca","0x956b3240619a86f1f570c85cc02686346b0e3c78","0x9b54d1d45407506bca3205cc940770371e091d1f","0xe031cef190a23e47dc62bee4092da75a77d13680","0x78e96be52e38b3fc3445a2ed34a6e586ffab9631","0xf17fa37cdafa0c847480cbda0e622e943d201290","0x7629227cd277c61a7ad0775cf6226036c4be1e2c","0x5b63b4929094c6a68c39f787939b5b318c47272c","0x5d76a92b7cb9e1a81b8eb8c16468f1155b2f64f4","0xaf1233c95834efbdf495fca7d6e892cd16809816","0x2c12d3dd91fc98593e27dc22733f187581821113","0x668f37ed76cb7d5e23a15e0ba66e02e69b51ad4d","0x6e086e1c6b2f12f2284c78cc009278f6bcd6ff45","0xd8bde5268d4ca1887306791319b27816d0b04038","0x07c6a338cbc1e4e7118d52499dbb2678a2f5458a","0x11f061e95da5d0dff33dc83406f0bbf7177d3a86","0xd33dd8f22ce7befd3d76052a0a2cfa9096b5671a","0xf1294ed7008d025b1989bb0632f1f21ce4049c0d","0x796ad775d8b7fb1445a2196b7b7c297f87e8b9f2","0xc00ac4de5bbe235135e67ba58bde41d4d863f6b8","0xb5041a23d31fe96b160c829c41ef41a7944262e6","0xfe00888ff72e11b00437a13ff96965b44cbf7d47","0xc615004a406b7e6b3b499624a8fe0d57f0b03524","0x6a99e8961055b505d8d62c447220bb341ad769ee","0xc3b2fc58a3a54739e303b5e7c53bd6021d1d56dd","0xbb70a5a194c3346be51f3fa1853605042e091769","0x55d622e678d4d884bc0e48d05f0a8bba5a53a89f","0xd8d4c9a7012b1cb8f0f164976c4c2bb35bc13f8f","0x2f24a7acd70e866c34e0b09418053339a859c34f","0x9f09514fed7fd5ae49d66ecc09a9f577fd556f04","0xd5597930a0889cd9dd24257311752c8ba755cd1c","0xbdd4c01b14468b6686b6ef1b0399705c94fb63fe","0xf60595b5bb6fa8135c0feef89543521ff38ba83e","0x3c023d247d174491ea683bf28d53981373cc5247","0xf963837cf127d561c8e0c4691ebd5c2e4828c5ee","0x0213a402474495d09431731e80301cd93f3db26b","0xbda6ba3ad624582495c55451a1840e563fc16389","0x362a8fa0c3c6cf7b248b77869718a64e0f6d0512","0xc9f2f0fad3e1ba0ac02930830503a2dbcb878eb2","0x46b516d01f1316bddea0fb3accaf4d8e29e13e13","0xb8a9c91d5503813f036dbe007f0d12c254018e8a","0xc5a1b185f8cf0ef7f5461b4f2fa467e3e5964e93","0x51925cdef71a5dc7cd8c4729f053460d0027c915","0xd858dd8a338df2f3aeb9684bd6aeca07d09e8f67","0xdff92a1d3c7832cbcc762ee5f326679dd801648e","0x9a1d246da1ae642d72bed133ac183fa495cc7c23","0xc977658056b8e839907699dbecbba699c1a8da86","0x5d81940e60dadda8b85d0b6fb5dc9941a3db2c64","0xfdc6a17917115498a3ed417d4a89224685f26ea3","0xfe48bea20393450a3a7240c1a25a84170bcb8015","0x8cd9f9c08c6a3f891bc570f1d6a3dc91c1f62bb0","0x68b23cda2d3b9d992a5762783a64e00e1f04f0e5","0xb8700c17bb966ab854a343377ddf6a2ef06630a3","0xc7af8b36976c0eb38a65fef22fa86a850b2001c4","0xb5aef4ef7196222990472965bb75153892d686c5","0x4f0b8b5feac7dc4d6497d2cf13e0cb1f991e5f0f","0x3a7c260e127900807810966be391361f95b53eb6","0x2c46067620072957c426b4e8297e9c656eafeabb","0x7911ca547f65a951ed1e5c74de04b8707080f0fd","0xee338a4307544f7ac4e8569311dccb7fcc59a00d","0x7cf4bf49675ec763af02b2d9d85c90ce2852dc37","0x78763c12a44d64bab547061b675b659cec4066c1","0x6567d121ece293fab07e0c22037be06d24887ea3"]

unstaked_count = 0
staked_count = 0
i = 0
while i < len(addresses):
    query = gql('''
    query {
      stakingActions(where:{user: "'''+ addresses[i] +'''"}) {
       
       type
       amount
        
       
    }

    }
    ''')

    i = i +1

    response = client.execute(query)

    #print (response['stakingActions'])

    
    if not (response['stakingActions']):
       
        unstaked_count = unstaked_count + 1

    else:
        staked_count = staked_count + 1

        

    
    #print (response)


print (unstaked_count)
print (staked_count)


